<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CarbonClarity 2025 — Save Our Only Home</title>
  <meta name="description" content="The most accurate & emotional carbon footprint calculator on Earth." />
  <link rel="icon" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEglYezDr38PQIqu1wKJB6PWf3w4W8h7Tfri30UqTNbHygp7YLCjiw2ikmlDel8IYMGaKl5ZlYXzm_YLQZVxuQPNz57dKbXTuz00wAX4NNs1xs5ERzKoIxjdwzjgAScjSg-GX-VnnQrNf3dhvr0J2HKHtyqB8HlQbLfSsvt7cGh1-lf8pspR8IEjzHIPnye_/s192/android-chrome-192x192.png" type="image/x-icon"/>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@800;900&family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* Existing CSS from previous response including upgraded header and footer styles */
    /* ... (paste all previous CSS here, exactly as given) ... */
    /* For brevity, include all styles from the previous response */
  </style>
</head>
<body>

<header id="siteHeader" role="banner">
  <div class="logo" aria-hidden="false">
    <span class="dot" aria-hidden="true"></span>
    <span>CARBONCLARITY</span>
  </div>

  <nav class="nav-links hidden md:flex space-x-6" role="navigation" aria-label="Main navigation">
    <a href="#home">Home</a>
    <a href="#tool">Calculator</a>
    <a href="#content">Truth</a>
    <a href="#faq">FAQ</a>
  </nav>

  <button class="burger" aria-expanded="false" aria-controls="mobileMenu" aria-label="Open menu">
    <i class="fas fa-bars"></i>
  </button>
</header>

<div class="mobile-menu" id="mobileMenu" role="menu" aria-hidden="true">
  <a href="#home" role="menuitem">Home</a>
  <a href="#tool" role="menuitem">Calculator</a>
  <a href="#content" role="menuitem">Truth</a>
  <a href="#faq" role="menuitem">FAQ</a>
</div>

<section class="hero" id="home" aria-labelledby="heroTitle">
  <h1 id="heroTitle">CARBON<br>CLARITY</h1>
  <p class="hero-sub">2025 — The Truth We Can't Ignore</p>
  <div class="glow-line" aria-hidden="true"></div>
  <p class="hero-tag">This is not just a number. This is our only home. Know your impact. Change for the better.</p>
</section>

<section class="calc-section" id="tool" aria-labelledby="toolTitle">
  <!-- Calculator content from your original code -->
  <!-- ... -->
</section>

<!-- Content and FAQ sections same as original (omitted here for brevity) -->

<footer>
  <h3 class="footer-title bg-gradient-to-r from-cyan-400 to-emerald-400 bg-clip-text text-transparent font-bold">
    CarbonClarity
  </h3>
  <div class="footer-icons" role="navigation" aria-label="Social links">
    <a href="https://x.com/Mukeshkr741" aria-label="Twitter / X">
      <i class="fab fa-twitter"></i>
    </a>
    <a href="https://instagram.com/techinsight1x" aria-label="Instagram">
      <i class="fab fa-instagram"></i>
    </a>
    <a href="https://linkedin.com/in/mukesh-kumar-malakar" aria-label="LinkedIn">
      <i class="fab fa-linkedin"></i>
    </a>
    <a href="https://youtube.com/@techinsightsx" aria-label="YouTube">
      <i class="fab fa-youtube"></i>
    </a>
  </div>
  <div class="footer-links">
    <a href="terms.html">Terms of Service</a> •
    <a href="privacy.html">Privacy Policy</a> •
    <a href="contact.html">Contact Us</a>
  </div>
  <p class="footer-love">
    Made with <i class="fas fa-heart text-red-500"></i> for Earth
  </p>
</footer>

<script>
  // Smooth scroll for in-page links (with mobile menu close)
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      const targetId = this.getAttribute('href');
      if (!targetId || targetId === '#') return;
      e.preventDefault();
      const el = document.querySelector(targetId);
      if (el) {
        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        setTimeout(() => { el.setAttribute('tabindex','-1'); el.focus({preventScroll:true}); }, 500);
      }
      if (document.getElementById('mobileMenu').classList.contains('active')) {
        document.getElementById('mobileMenu').classList.remove('active');
        document.body.classList.remove('menu-open');
        document.querySelector('.burger').setAttribute('aria-expanded','false');
        document.getElementById('mobileMenu').setAttribute('aria-hidden','true');
      }
    });
  });

  // Mobile menu toggle with aria
  const burger = document.querySelector('.burger');
  const mobileMenu = document.getElementById('mobileMenu');
  burger.addEventListener('click', () => {
    const open = mobileMenu.classList.toggle('active');
    document.body.classList.toggle('menu-open');
    burger.setAttribute('aria-expanded', open ? 'true' : 'false');
    mobileMenu.setAttribute('aria-hidden', open ? 'false' : 'true');
    if (open) {
      mobileMenu.querySelector('a')?.focus();
    }
  });

  // Fade in/out animation on scroll for header and footer
  window.addEventListener('scroll', () => {
    const header = document.getElementById('siteHeader');
    const footer = document.querySelector('footer');
    const scrollY = window.scrollY;

    if (scrollY > 40) {
      header.classList.add('scrolled');
      footer.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
      footer.classList.remove('scrolled');
    }
  });

  // Emission factors (tons CO2e per unit)
  const f = {
    electricity: 0.000233,
    car: 0.00021,
    flight: 0.15,
    waste: 0.031,
    meatMeal: 0.04
  };

  let barChart, pieChart;

  // Carbon footprint calculator function
  function calculateCarbon() {
    const e  = +document.getElementById('electricity').value || 0;
    const c  = +document.getElementById('carKm').value || 0;
    const fl = +document.getElementById('flights').value || 0;
    const w  = +document.getElementById('waste').value || 0;
    const m  = +document.getElementById('meatMeals').value || 0;

    const elec   = e  * 12 * f.electricity;
    const car    = c  * 52 * f.car;
    const flight = fl * f.flight;
    const waste  = w  * 52 * f.waste;
    const meat   = m  * 52 * f.meatMeal;
    const total  = elec + car + flight + waste + meat;

    document.getElementById('totalEmission').textContent = total.toFixed(2) + " tons CO₂e";

    document.getElementById('breakdown').innerHTML = `
      <div class="box bg-cyan-900/5">
        <p class="box-title">Electricity</p>
        <p class="box-value text-cyan-300 font-black">${elec.toFixed(2)} t</p>
      </div>
      <div class="box bg-blue-900/5">
        <p class="box-title">Car</p>
        <p class="box-value text-blue-300 font-black">${car.toFixed(2)} t</p>
      </div>
      <div class="box bg-yellow-900/5">
        <p class="box-title">Flights</p>
        <p class="box-value text-yellow-300 font-black">${flight.toFixed(2)} t</p>
      </div>
      <div class="box bg-red-900/5">
        <p class="box-title">Waste</p>
        <p class="box-value text-red-300 font-black">${waste.toFixed(2)} t</p>
      </div>
      <div class="box bg-purple-900/5">
        <p class="box-title">Diet</p>
        <p class="box-value text-purple-300 font-black">${meat.toFixed(2)} t</p>
      </div>
    `;

    const labels = ['Electricity','Car','Flights','Waste','Diet'];
    const data   = [elec, car, flight, waste, meat];
    const colors = ['#34D399','#60A5FA','#FBBF24','#F87171','#C084FC'];

    if (barChart) barChart.destroy();
    if (pieChart) pieChart.destroy();

    const barCtx = document.getElementById('barChart').getContext('2d');
    const pieCtx = document.getElementById('pieChart').getContext('2d');

    barChart = new Chart(barCtx, {
      type: 'bar',
      data: { labels, datasets: [{ data, backgroundColor: colors, borderRadius: 12 }] },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: ctx => `${ctx.parsed.y?.toFixed(2) ?? ctx.parsed} t CO₂e`
            }
          }
        },
        scales: {
          x: { ticks: { color: '#e5e7eb' }, grid: { display:false } },
          y: { ticks: { color: '#e5e7eb' }, grid: { color:'rgba(148,163,184,0.08)' } }
        }
      }
    });

    pieChart = new Chart(pieCtx, {
      type: 'doughnut',
      data: { labels, datasets: [{ data, backgroundColor: colors, borderWidth:12, borderColor:'#020617' }] },
      options: {
        responsive:true,
        maintainAspectRatio:false,
        plugins:{
          legend:{ position:'bottom', labels:{ color:'#e5eeb8' }},
          tooltip:{
            callbacks:{
              label: ctx => {
                const val = ctx.parsed;
                const percent = total > 0 ? (val / total * 100).toFixed(1) : 0;
                return `${ctx.label}: ${val.toFixed(2)} t (${percent}%)`;
              }
            }
          }
        },
        cutout:'58%'
      }
    });

    const suggestions = document.getElementById('suggestions');
    if(total <= 2) {
      suggestions.textContent = "Great — your footprint is within the planet’s safe limit. Keep sharing your habits and inspire others.";
    } else if(total <= 6) {
      suggestions.textContent = "You're close to sustainable levels. A few targeted changes (switching electricity source, using public transit, or reducing meat meals) can push you below 2 t/year.";
    } else {
      suggestions.textContent = "This footprint is higher than Earth’s safe limit. Start with one bold change this month: install solar, switch to an EV or public transit, or go plant-forward with meals.";
    }

    const resultsEl = document.getElementById('results');
    resultsEl.classList.remove('hidden');
    resultsEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
  }

  // Reset the calculator form
  function resetForm() {
    document.getElementById('carbonForm').reset();
    document.getElementById('results').classList.add('hidden');
    document.getElementById('totalEmission').textContent = "0.00 tons CO₂e";
    document.getElementById('breakdown').innerHTML = "";
    document.getElementById('suggestions').textContent = "";
    if (barChart) barChart.destroy();
    if (pieChart) pieChart.destroy();
  }

  // FAQ toggle logic for accessibility and keyboard support
  function toggleFAQEl(faqQ) {
    const ans = faqQ.nextElementSibling;
    const icon = faqQ.querySelector('i');
    const isActive = ans.classList.contains('active');
    if (isActive) {
      ans.classList.remove('active');
      faqQ.setAttribute('aria-expanded','false');
      ans.setAttribute('aria-hidden','true');
      icon.classList.replace('fa-chevron-up','fa-chevron-down');
      ans.style.maxHeight = '0';
    } else {
      ans.classList.add('active');
      faqQ.setAttribute('aria-expanded','true');
      ans.setAttribute('aria-hidden','false');
      icon.classList.replace('fa-chevron-down','fa-chevron-up');
      ans.style.maxHeight = ans.scrollHeight + 60 + 'px';
    }
  }

  document.querySelectorAll('.faq-q').forEach(el => {
    el.addEventListener('click', () => toggleFAQEl(el));
    el.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggleFAQEl(el);
      } else if (e.key === 'ArrowDown') {
        e.preventDefault();
        const next = el.parentElement.nextElementSibling?.querySelector('.faq-q');
        if (next) next.focus();
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        const prev = el.parentElement.previousElementSibling?.querySelector('.faq-q');
        if (prev) prev.focus();
      }
    });
  });
</script>

</body>
</html>
